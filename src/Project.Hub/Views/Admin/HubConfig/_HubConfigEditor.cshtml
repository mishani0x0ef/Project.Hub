@using Project.Hub.Config.Entities;

@model RawConfig

<environment include="Development">
    <link rel="stylesheet" href="~/css/code-editor.css" />
</environment>
<environment exclude="Development">
    <link rel="stylesheet" href="~/css/code-editor.min.css" asp-append-version="true" />
</environment>

@Html.Partial("HubConfig/_ConfigEditNotes")

<div class="editor-container panel">
    <button class="btn btn-lg btn-link btn-expand">
        <span class="glyphicon glyphicon-fullscreen"></span>
    </button>
    <button class="btn btn-lg btn-link btn-collapse">
        <span class="glyphicon glyphicon-resize-small"></span>
    </button>

    <div id="hub-config-editor" class="editor-content">
        @Model.Text
    </div>
</div>

<div>
    <button id="btn-hub-config-save" class="btn btn-primary">Save Config</button>
    <span id="lbl-hub-config-save-error" class="text-danger invisible">JSON is invalid. Fix all errors.</span>
</div>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.3.3/ace.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.3.3/mode-json.js"></script>
<environment include="Development">
    <script type="text/javascript" src="~/js/admin/hub-config.js"></script>
</environment>
<environment exclude="Development">
    <script type="text/javascript" src="~/js/admin.min.js"></script>
</environment>

<script>
    new HubConfigEditor("hub-config-editor");
</script>